(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4063:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!==o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!==o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!==o--;){var s=i[o];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}},4180:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(5893),o=n(9008),i=n(7294);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=n(4942);function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){var t=(0,i.useState)(e),n=t[0],r=t[1];return(0,i.useEffect)((function(){r(e)}),[e]),[n,r]}var p=n(1512),d=n.n(p);function h(e,t){var n=(0,i.useRef)(!1);(0,i.useEffect)((function(){if(n.current){var t=e();return function(){t&&t()}}n.current=!0}),t),(0,i.useEffect)((function(){return function(){n.current=!1}}),[])}var m,v=function(e,t){var n=(0,i.useRef)(e);return(0,i.useEffect)((function(){n.current=e}),null!==t&&void 0!==t?t:[e]),(0,i.useCallback)((function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];null===(e=n.current)||void 0===e||e.call.apply(e,[n].concat(r))}),[])};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.INDENT=1]="INDENT",e[e.DEINDENT=-1]="DEINDENT"}(m||(m={}));var y=function e(t){var n=t.id,o=t.name,s=t.completed,a=void 0!==s&&s,c=t.subtasks,l=t.onChange,p=t.onAddClick,b=t.onDelete,y=t.onIndent,k=t.focus,O=void 0!==k&&k,j=u(f(a),2),w=j[0],x=j[1],E=u(f(o),2),N=E[0],T=E[1],_=u(f(c),2),D=_[0],S=_[1],P=(0,i.useRef)(null);(0,i.useEffect)((function(){if(void 0!==O&&null!==P&&void 0!==P&&P.current)if("boolean"===typeof O&&O)P.current.getEl().focus();else if("number"===typeof O)if(0===O)P.current.getEl().focus();else{var e=P.current.getEl().childNodes[0],t=document.createRange();t.setStart(e,O),t.setEnd(e,O);var n=window.getSelection();null===n||void 0===n||n.removeAllRanges(),null===n||void 0===n||n.addRange(t)}}),[O]);var C=(0,i.useMemo)((function(){if(l)return function(e,t){var n;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(n),n=setTimeout((function(){return e.apply(void 0,o)}),t)}}(l,500)}),[]);h((function(){(w||null!==D&&void 0!==D&&D.every((function(e){return e.completed})))&&S((function(e){return null===e||void 0===e?void 0:e.map((function(e){return g(g({},e),{},{completed:w})}))})),l&&l({id:n,completed:w,name:N})}),[w]);var I=function(e){S((function(t){return null===t||void 0===t?void 0:t.map((function(t){return t.id==e.id?g(g({},t),{},{completed:e.completed}):t}))})),l&&l(e)};h((function(){D&&(null===D||void 0===D?void 0:D.length)>0&&(D.every((function(e){return e.completed}))?x(!0):x(!1))}),[D]),h((function(){C&&C({id:n,completed:w,name:N})}),[N]);var R=function(){p&&p({id:n})},A=function(){b&&b({id:n})},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.INDENT;y&&y({id:n,indentType:e})},H=v((function(e){switch(e.key){case"Enter":e.preventDefault(),R();break;case"Backspace":if(N.length>0)return;e.preventDefault(),A();break;case"Tab":e.preventDefault(),e.shiftKey?M(m.DEINDENT):M(m.INDENT)}}),[N,R,A]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex p-1 group -ml-14",children:[(0,r.jsx)("button",{onClick:R,className:"self-start text-lg px-2 text-gray-400 transition-all rounded opacity-0 group-hover:opacity-100 hover:bg-gray-200",children:"+"}),(0,r.jsx)("button",{className:"self-start cursor-move text-lg px-1 text-gray-400 transition-all rounded opacity-0 group-hover:opacity-100 hover:bg-gray-200 mr-2",children:"\u283f"}),(0,r.jsx)("input",{type:"checkbox",checked:w,className:"mt-1 cursor-pointer focus:ring-offset-0 focus:ring-black h-4 w-4 text-purple-600 rounded hover:bg-gray-200",onChange:function(e){return x(e.target.checked)}}),(0,r.jsx)(d(),{className:"focus:outline-none w-full ml-2 ".concat(w?"line-through text-gray-400":"text-gray-700"),html:N,onChange:function(e){return T(e.target.value)},ref:P,placeholder:"To-do",onKeyDown:H})]}),D&&D.length>0&&(0,r.jsx)("div",{className:"ml-8",children:D.map((function(t){return(0,r.jsx)(e,g(g({},t),{},{onChange:I,onAddClick:p,onDelete:b,onIndent:y}),t.id)}))})]})};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t)return[n];if(r.subtasks){var o=j(r.subtasks,t);if(0!==o.length)return[n].concat(l(o))}}return[]}function w(e,t,n){var r=l(t),o=r.shift();return void 0===o||void 0===e?[]:[].concat(l(e.slice(0,r.length>0?o:o+1).map((function(e){return O(O({},e),{},{focus:!1})}))),[r.length>0?O(O({},e[o]),{},{subtasks:w(e[o].subtasks,r,n),focus:!1}):n],l(e.slice(o+1).map((function(e){return O(O({},e),{},{focus:!1})}))))}function x(e,t){var n,r,o=l(t),i=o.shift();return void 0===i||void 0===e?[]:0===o.length?0===i?[O(O({},e[1]),{},{focus:!0})].concat(l(e.slice(2))):[].concat(l(e.slice(0,i-1)),[O(O({},e[i-1]),{},{focus:e[i-1].name.length})],l(e.slice(i+1))):[].concat(l(e.slice(0,i)),[O(O({},e[i]),{},{subtasks:1===(null===(n=e[i].subtasks)||void 0===n?void 0:n.length)?[]:x(e[i].subtasks,o),focus:1===(null===(r=e[i].subtasks)||void 0===r?void 0:r.length)&&e[i].name.length})],l(e.slice(i+1)))}function E(e,t){var n,r=l(t),o=r.shift();return void 0===o||void 0===e?[]:0===o&&0===r.length?e:0===r.length?[].concat(l(e.slice(0,o-1)),[O(O({},e[o-1]),{},{subtasks:null===(n=e[o-1].subtasks?e[o-1].subtasks:[])||void 0===n?void 0:n.concat(O(O({},e[o]),{},{focus:e[o].name.length}))})],l(e.slice(o+1))):[].concat(l(e.slice(0,o)),[O(O({},e[o]),{},{subtasks:E(e[o].subtasks,r)})],l(e.slice(o+1)))}function N(e,t){var n,r,o=l(t),i=o.shift();return void 0===i||void 0===e?[]:0===i&&0===o.length?e:1===o.length?[].concat(l(e.slice(0,i)),[O(O({},e[i]),{},{subtasks:null===(n=e[i].subtasks)||void 0===n?void 0:n.filter((function(e,t){return t!==o[0]}))}),(null!==(r=e[i].subtasks)&&void 0!==r?r:[])[o[0]]],l(e.slice(i+1))):[].concat(l(e.slice(0,i)),[O(O({},e[i]),{},{subtasks:N(e[i].subtasks,o)})],l(e.slice(i+1)))}function T(e,t,n){var r=l(t),o=r.shift();return void 0===e?[]:0===r.length?e.map((function(e){return e.id===n.id?O(O({},e),n):e})):e.map((function(e,t){return t===o?O(O({},e),{},{subtasks:T(e.subtasks,r,n)}):e}))}var _=function(e){var t=u(f(e.defaultTasks),2),n=t[0],o=t[1],i=function(e){var t=j(n,e.id);0!==t.length&&o((function(n){return T(n,t,e)}))},s=function(e){var t=e.id,r=j(n,t);if(0!==r.length){var i={id:Math.floor(1e4*Math.random())+100,name:"",completed:!1,subtasks:[],focus:!0};o((function(e){return w(e,r,i)}))}},a=function(e){var t,r=e.id,i=j(n,r);0===i.length||1===n.length&&void 0===n[0].subtasks||0===(null===(t=n[0].subtasks)||void 0===t?void 0:t.length)||o((function(e){return x(e,i)}))},c=function(e){var t=e.id,r=e.indentType,i=j(n,t);0!==i.length&&(r===m.INDENT?o((function(e){return E(e,i)})):r===m.DEINDENT&&i.length>1&&o((function(e){return N(e,i)})))};return(0,r.jsx)(r.Fragment,{children:n.map((function(e){return(0,r.jsx)(y,O(O({},e),{},{onChange:i,onAddClick:s,onDelete:a,onIndent:c}),e.id)}))})},D=[{id:1,name:"Task 1",completed:!1,subtasks:[{id:2,name:"Subtask 1",completed:!1,subtasks:[{id:3,name:"Deep Task 1",completed:!1,subtasks:[]},{id:9,name:"Deep Task 2",completed:!1,subtasks:[]}]},{id:4,name:"Subtask 2",completed:!0,subtasks:[]}]},{id:5,name:"Task 2",completed:!0,subtasks:[]},{id:6,name:"Task 3",completed:!1,subtasks:[{id:7,name:"Subtask 1",completed:!1,subtasks:[]},{id:8,name:"Subtask 2",completed:!0,subtasks:[]}]}],S=[{id:1,name:"Task 1",completed:!1},{id:2,name:"Task 2",completed:!1},{id:3,name:"Task 3",completed:!1},{id:4,name:"Task 4 - Which is a task which is lengthy to fit into the display of this test UI",completed:!1}],P=function(){var e=(0,i.useState)("simple"),t=e[0],n=e[1];return(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,r.jsxs)(o.default,{children:[(0,r.jsx)("title",{children:"YaTodo"}),(0,r.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("div",{className:"flex justify-center",children:[(0,r.jsx)("h1",{className:"cursor-pointer text-lg text-center mr-4 ".concat("simple"===t?"underline":""),onClick:function(){return n("simple")},children:"Simple Tasks"}),(0,r.jsx)("h1",{className:"cursor-pointer text-lg text-center ".concat("nested"===t?"underline":""),onClick:function(){return n("nested")},children:"Nested Tasks"})]}),"simple"===t&&(0,r.jsx)(_,{defaultTasks:S}),"nested"===t&&(0,r.jsx)(_,{defaultTasks:D})]})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4180)}])},9008:function(e,t,n){e.exports=n(639)},1512:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return s(t,e),t},u=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(7294)),f=c(n(4063)),p=a(n(5697));function d(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastHtml=t.props.html,t.el="function"===typeof t.props.innerRef?{current:null}:l.createRef(),t.getEl=function(){return(t.props.innerRef&&"function"!==typeof t.props.innerRef?t.props.innerRef:t.el).current},t.emitChange=function(e){var n=t.getEl();if(n){var r=n.innerHTML;if(t.props.onChange&&r!==t.lastHtml){var o=Object.assign({},e,{target:{value:r}});t.props.onChange(o)}t.lastHtml=r}},t}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.tagName,r=t.html,i=t.innerRef,s=u(t,["tagName","html","innerRef"]);return l.createElement(n||"div",o(o({},s),{ref:"function"===typeof i?function(t){i(t),e.el.current=t}:i||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:r}}),this.props.children)},t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=this.getEl();return!n||(d(e.html)!==d(n.innerHTML)||(t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||t.innerRef!==e.innerRef||t.placeholder!==e.placeholder||!f.default(t.style,e.style)))},t.prototype.componentDidUpdate=function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.props.html),this.lastHtml=this.props.html,function(e){var t=document.createTextNode("");e.appendChild(t);var n=document.activeElement===e;if(null!==t&&null!==t.nodeValue&&n){var r=window.getSelection();if(null!==r){var o=document.createRange();o.setStart(t,t.nodeValue.length),o.collapse(!0),r.removeAllRanges(),r.addRange(o)}e instanceof HTMLElement&&e.focus()}}(e))},t.propTypes={html:p.string.isRequired,onChange:p.func,disabled:p.bool,tagName:p.string,className:p.string,style:p.object,innerRef:p.oneOfType([p.object,p.func])},t}(l.Component);t.default=h}},function(e){e.O(0,[774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);